# Arizona DRIP Forum Backend

Backend API –¥–ª—è —Ñ–æ—Ä—É–º–∞ Arizona DRIP, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π –Ω–∞ Node.js 18 —Å MySQL –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
npm install
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –ø–∞–ø–∫–µ `backend` —Å–æ —Å–ª–µ–¥—É—é—â–∏–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º:

```env
# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞
PORT=5000
NODE_ENV=development
FRONTEND_URL=http://localhost:3000

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ MySQL –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
MYSQL_HOST=89.169.1.168
MYSQL_PORT=3306
MYSQL_USER=hesus
MYSQL_PASSWORD=
MYSQL_DATABASE=dripforum

# JWT —Å–µ–∫—Ä–µ—Ç –¥–ª—è —Ç–æ–∫–µ–Ω–æ–≤
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
```

### 3. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
```bash
# –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
npm run dev

# –ü—Ä–æ–¥–∞–∫—à–Ω —Ä–µ–∂–∏–º
npm start
```

## üìä API Endpoints

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- `POST /api/auth/register` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `POST /api/auth/login` - –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
- `GET /api/auth/me` - –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `POST /api/auth/refresh` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
- `POST /api/auth/logout` - –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- `GET /api/users` - –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–º–æ–¥–µ—Ä–∞—Ç–æ—Ä—ã/–∞–¥–º–∏–Ω—ã)
- `GET /api/users/:userId` - –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `PUT /api/users/:userId` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
- `PATCH /api/users/:userId/role` - –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–æ–ª–∏ (–∞–¥–º–∏–Ω—ã)
- `PATCH /api/users/:userId/status` - –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞/—Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ (–º–æ–¥–µ—Ä–∞—Ç–æ—Ä—ã/–∞–¥–º–∏–Ω—ã)

### –ö–∞—Ç–µ–≥–æ—Ä–∏–∏
- `GET /api/categories` - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- `GET /api/categories/:categoryId` - –ö–∞—Ç–µ–≥–æ—Ä–∏—è —Å —Ç–µ–º–∞–º–∏
- `POST /api/categories` - –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–∞–¥–º–∏–Ω—ã)
- `PUT /api/categories/:categoryId` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–∞–¥–º–∏–Ω—ã)
- `DELETE /api/categories/:categoryId` - –£–¥–∞–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–∞–¥–º–∏–Ω—ã)

### –¢–µ–º—ã
- `GET /api/topics` - –°–ø–∏—Å–æ–∫ —Ç–µ–º —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
- `GET /api/topics/:topicId` - –¢–µ–º–∞ —Å –ø–æ—Å—Ç–∞–º–∏
- `POST /api/topics` - –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Ç–µ–º—ã
- `PUT /api/topics/:topicId` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–º—ã
- `PATCH /api/topics/:topicId/pin` - –ó–∞–∫—Ä–µ–ø–ª–µ–Ω–∏–µ —Ç–µ–º—ã (–º–æ–¥–µ—Ä–∞—Ç–æ—Ä—ã)
- `PATCH /api/topics/:topicId/lock` - –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ç–µ–º—ã (–º–æ–¥–µ—Ä–∞—Ç–æ—Ä—ã)
- `DELETE /api/topics/:topicId` - –£–¥–∞–ª–µ–Ω–∏–µ —Ç–µ–º—ã

### –ü–æ—Å—Ç—ã
- `GET /api/posts/topic/:topicId` - –ü–æ—Å—Ç—ã —Ç–µ–º—ã
- `POST /api/posts` - –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ—Å—Ç–∞
- `PUT /api/posts/:postId` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å—Ç–∞
- `DELETE /api/posts/:postId` - –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ—Å—Ç–∞
- `POST /api/posts/:postId/like` - –õ–∞–π–∫/–∞–Ω–ª–∞–π–∫ –ø–æ—Å—Ç–∞
- `GET /api/posts/:postId/likes` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ª–∞–π–∫–∞—Ö
- `GET /api/posts/search` - –ü–æ–∏—Å–∫ –ø–æ –ø–æ—Å—Ç–∞–º

### –ñ–∞–ª–æ–±—ã
- `GET /api/reports` - –°–ø–∏—Å–æ–∫ –∂–∞–ª–æ–± (–º–æ–¥–µ—Ä–∞—Ç–æ—Ä—ã/–∞–¥–º–∏–Ω—ã)
- `POST /api/reports` - –°–æ–∑–¥–∞–Ω–∏–µ –∂–∞–ª–æ–±—ã
- `GET /api/reports/:reportId` - –î–µ—Ç–∞–ª–∏ –∂–∞–ª–æ–±—ã
- `PATCH /api/reports/:reportId/assign` - –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä—É
- `PATCH /api/reports/:reportId/resolve` - –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∂–∞–ª–æ–±—ã
- `PATCH /api/reports/:reportId/priority` - –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞

### –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
- `GET /api/admin/stats/overview` - –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `GET /api/admin/stats/daily` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –¥–Ω—è–º
- `GET /api/admin/stats/top-users` - –¢–æ–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `GET /api/admin/settings` - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ–æ—Ä—É–º–∞
- `PUT /api/admin/settings` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
- `GET /api/admin/logs/activity` - –õ–æ–≥–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- `GET /api/admin/system/info` - –°–∏—Å—Ç–µ–º–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

## üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ —Å–µ—Ä–≤–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ MySQL
2. ‚úÖ –°–æ–∑–¥–∞—Å—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–∞–±–ª–∏—Ü—ã (–µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç)
3. ‚úÖ –î–æ–±–∞–≤–∏—Ç –Ω–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –∞–¥–º–∏–Ω-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
4. ‚úÖ **–ù–ï –û–ß–ò–°–¢–ò–¢** —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:
- `users` - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Ñ–æ—Ä—É–º–∞
- `categories` - –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–µ–º
- `topics` - –¢–µ–º—ã –æ–±—Å—É–∂–¥–µ–Ω–∏–π
- `posts` - –ü–æ—Å—Ç—ã –≤ —Ç–µ–º–∞—Ö
- `reports` - –ñ–∞–ª–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `bans` - –ë–∞–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `post_likes` - –õ–∞–π–∫–∏ –ø–æ—Å—Ç–æ–≤
- `forum_settings` - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ–æ—Ä—É–º–∞

## üîê –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

- **user** - –û–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- **vip** - VIP –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- **moderator** - –ú–æ–¥–µ—Ä–∞—Ç–æ—Ä
- **admin** - –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- JWT —Ç–æ–∫–µ–Ω—ã –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π —Å bcrypt
- Rate limiting –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç DDoS
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ middleware

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–µ—Ä–≤–µ—Ä –ª–æ–≥–∏—Ä—É–µ—Ç:
- –í—Å–µ HTTP –∑–∞–ø—Ä–æ—Å—ã
- –û—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î
- –ü—Ä–æ—Ü–µ—Å—Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ë–î
- –û—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º –∫ –ë–î:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `.env`
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ MySQL —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `hesus`

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ—Ä—Ç–æ–º:
1. –ò–∑–º–µ–Ω–∏—Ç–µ `PORT` –≤ `.env`
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø–æ—Ä—Ç –Ω–µ –∑–∞–Ω—è—Ç –¥—Ä—É–≥–∏–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º

### –ü—Ä–æ–±–ª–µ–º—ã —Å JWT:
1. –ò–∑–º–µ–Ω–∏—Ç–µ `JWT_SECRET` –≤ `.env`
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –∏ —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ:
- MySQL —Å–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É `89.169.1.168`
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å `hesus` –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –±–∞–∑–µ `dripforum`
- –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
